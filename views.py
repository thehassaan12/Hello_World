from django.shortcuts import renderfrom django.contrib import authfrom django.shortcuts import render, get_object_or_404, redirectfrom django.http import HttpResponseRedirectfrom django.http import HttpResponsefrom django.views.generic import TemplateViewfrom django.contrib.auth.models import Userfrom .models import Zrtmbldtfrom .models import Finaid_app_statusfrom .models import Finaid_app_awardfrom .models import Finaid_app_reqfrom .models import Finaid_app_holdfrom .models import Finaid_app_sapfrom django.template import loaderimport reimport datetimeimport osfrom xml.etree import ElementTreefrom django.db.models import Qfrom datetime import datefrom django.core.files.base import ContentFileimport xml.etree.ElementTree as ET from django.http import JsonResponsefrom rest_framework.views import APIViewfrom rest_framework.response import Responsefrom rest_framework import statusfrom rest_framework import viewsetsimport jsonfrom django.contrib.admin.views.decorators import   	staff_member_requiredimport sys def index(request):    hold_info = ""        len_message = ""    app_fund_info = ""    app_hold_info = ""    app_req_code = ""    app_sap_status = ""    app_status_header = ""      log_message = ""    aidy_year_desc = ""    username = ""    table_username = ""    context = {}    len_message = 2    login_user = str(request.user)    aidy_year = ""#---------------Zrtmbldt----------------------    table_users = Zrtmbldt.objects.filter (username__startswith=str(login_user))    for indx_user in table_users.filter(username__startswith=str(login_user)):        aidy_year = indx_user.zrtmbldt_aidy_code#---------------Finaid_app_status----------------------    table_status = Finaid_app_status.objects.filter (username__startswith=str(login_user))    for indx_status in table_status.all():       app_status_header = indx_status.app_status_header#---------------Finaid_app_award----------------------    table_award = Finaid_app_award.objects.filter (username__startswith=str(login_user))    for indx_award in table_award.all():       app_fund_info = indx_award.app_fund_code#---------------Finaid_app_req----------------------       table_req = Finaid_app_req.objects.filter (username__startswith=str(login_user))    for indx_req in table_req.all():       app_req_code = indx_req.app_req_code #---------------Finaid_app_hold----------------------    table_hold = Finaid_app_hold.objects.filter (username__startswith=str(login_user))    for indx_hold in table_hold.all():       app_hold_info = indx_hold.app_hold_reason#---------------Finaid_app_sap----------------------    table_sap = Finaid_app_sap.objects.filter (username__startswith=str(login_user))    table_sap = table_sap.filter (aidy_code__startswith=str( aidy_year ))    for indx_sap in table_sap.filter (aidy_code__startswith=str( aidy_year )):       app_sap_status = indx_sap.app_sap_status#---------------Aid year info----------------------        for table_user in table_users.filter(username__startswith=str(login_user)):       table_username = table_user.username       aidy_year = table_user.zrtmbldt_aidy_code       aidy_year_desc = table_user.zrtmbldt_aidy_code_desc       username = table_user.username    if login_user != 'AnonymousUser':          test = 'logged in as ' + login_user      template = loader.get_template('index.html')                      context = {                   'table_username' : table_username,                    'login_user' : login_user,                   'aidy_year_desc' : aidy_year_desc,                    'len_message' : len_message,                   'table_users' :  table_users,                   'table_status' : table_status,                   'table_award' : table_award,                   'table_req'  : table_req,                   'table_hold'  : table_hold,                   'table_sap' : table_sap,                   'hold_info' : app_hold_info,                   'sap_status' : app_sap_status,                     'app_req_code' : app_req_code,                    'app_fund' : app_fund_info,                   'app_status_header' :  app_status_header                   }      return render(request,'index.html', context)    else:  log_message = ' Not Logged In'    context = {'log_message' : log_message,               'len_message' : len(log_message)       }     return render(request,'index.html', context)    ooooooooooooooooooooooooo